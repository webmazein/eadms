import{r as l,_ as v,R as s,b as h,c as b,P as a,d as x,k as C,j as r}from"./index-DR7GZNYR.js";import{c as E}from"./index.es-0GHnYx6v.js";import{u as N}from"./index-DtGcbzJt.js";import{C as S,a as H,w as j}from"./config-B51nhIE6.js";import{a as y,C as k}from"./CRow-jAjqcbP2.js";import{C as w}from"./CCardHeader-DOh0Lhr8.js";var m=l.forwardRef(function(t,n){var o,u=t.className,c=t.chart,i=t.color,e=t.icon,d=t.values,g=v(t,["className","chart","color","icon","values"]);return s.createElement(S,h({className:u},g,{ref:n}),s.createElement(w,{className:b("position-relative d-flex justify-content-center align-items-center",(o={},o["bg-".concat(i)]=i,o))},e,c),s.createElement(H,{className:"row text-center"},d&&d.map(function(p,f){return s.createElement(s.Fragment,{key:f},f%2!==0&&s.createElement("div",{className:"vr"}),s.createElement(y,null,s.createElement("div",{className:"fs-5 fw-semibold"},p.value),s.createElement("div",{className:"text-uppercase text-body-secondary small"},p.title)))})))});m.propTypes={chart:a.oneOfType([a.string,a.node]),className:a.string,color:x,icon:a.oneOfType([a.string,a.node]),values:a.arrayOf(a.any)};m.displayName="CWidgetStatsD";var W=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M472,16H40A24.028,24.028,0,0,0,16,40V376a24.028,24.028,0,0,0,24,24H240v64H160v32H352V464H272V400H472a24.028,24.028,0,0,0,24-24V40A24.028,24.028,0,0,0,472,16Zm-8,352H48V272H464Zm0-128H48V48H464Z' class='ci-primary'/><rect width='32' height='32' x='400' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/>"];const D=()=>{C(e=>e.auth.user);const t=C(e=>e),[n,o]=l.useState(0);l.useEffect(()=>{console.log("state",t)},[t]);const{sendMessage:u,lastMessage:c,readyState:i}=N(`${j}`,{onOpen:()=>console.log("WebSocket connection established"),onClose:()=>console.log("WebSocket connection closed"),onError:e=>console.error("WebSocket error:",e),shouldReconnect:e=>!0});return l.useEffect(()=>{if(c!==null)try{const e=JSON.parse(c.data);e.type==="clientCount"&&o(e.count)}catch(e){console.error("Error parsing WebSocket message:",e)}},[c]),r.jsx(r.Fragment,{children:r.jsx(k,{children:r.jsx(y,{xs:2,children:r.jsx(m,{className:"mb-3",icon:r.jsx(E,{className:"my-4 text-white",icon:W,height:52}),style:{"--cui-card-cap-bg":"#3b5998"},values:[{title:"Clients Connected",value:n>0?n:0},{title:"PLC Status",value:"459"}]})})})})};export{D as default};
