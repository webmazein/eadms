import{r as l,_ as v,R as r,b as h,c as b,P as s,d as x,k as C,j as a}from"./index-BvsAo6bk.js";import{c as E}from"./index.es-CaM2XmDR.js";import{u as N}from"./index-EfigbEwa.js";import{w as H}from"./config-6WvNVX-n.js";import{C as S}from"./CRow-hJu6xMa9.js";import{C as y}from"./CCol-a21KGpRd.js";import{C as j,a as k}from"./CCardBody-BgCREiRt.js";import{C as w}from"./CCardHeader-BdmWY7vn.js";var m=l.forwardRef(function(t,n){var o,p=t.className,c=t.chart,i=t.color,e=t.icon,u=t.values,g=v(t,["className","chart","color","icon","values"]);return r.createElement(j,h({className:p},g,{ref:n}),r.createElement(w,{className:b("position-relative d-flex justify-content-center align-items-center",(o={},o["bg-".concat(i)]=i,o))},e,c),r.createElement(k,{className:"row text-center"},u&&u.map(function(d,f){return r.createElement(r.Fragment,{key:f},f%2!==0&&r.createElement("div",{className:"vr"}),r.createElement(y,null,r.createElement("div",{className:"fs-5 fw-semibold"},d.value),r.createElement("div",{className:"text-uppercase text-body-secondary small"},d.title)))})))});m.propTypes={chart:s.oneOfType([s.string,s.node]),className:s.string,color:x,icon:s.oneOfType([s.string,s.node]),values:s.arrayOf(s.any)};m.displayName="CWidgetStatsD";var W=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M472,16H40A24.028,24.028,0,0,0,16,40V376a24.028,24.028,0,0,0,24,24H240v64H160v32H352V464H272V400H472a24.028,24.028,0,0,0,24-24V40A24.028,24.028,0,0,0,472,16Zm-8,352H48V272H464Zm0-128H48V48H464Z' class='ci-primary'/><rect width='32' height='32' x='400' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/>"];const A=()=>{C(e=>e.auth.user);const t=C(e=>e),[n,o]=l.useState(0);l.useEffect(()=>{console.log("state",t)},[t]);const{sendMessage:p,lastMessage:c,readyState:i}=N(`${H}`,{onOpen:()=>console.log("WebSocket connection established"),onClose:()=>console.log("WebSocket connection closed"),onError:e=>console.error("WebSocket error:",e),shouldReconnect:e=>!0});return l.useEffect(()=>{if(c!==null)try{const e=JSON.parse(c.data);e.type==="clientCount"&&o(e.count)}catch(e){console.error("Error parsing WebSocket message:",e)}},[c]),a.jsx(a.Fragment,{children:a.jsx(S,{children:a.jsx(y,{xs:2,children:a.jsx(m,{className:"mb-3",icon:a.jsx(E,{className:"my-4 text-white",icon:W,height:52}),style:{"--cui-card-cap-bg":"#3b5998"},values:[{title:"Clients Connected",value:n>0?n:0}]})})})})};export{A as default};
